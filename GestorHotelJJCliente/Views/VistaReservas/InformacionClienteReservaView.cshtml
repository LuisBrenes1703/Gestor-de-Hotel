@{
    ViewData["Title"] = "InfoClienteReserva";
    Layout = "_Layout";
}

@model InformacionClienteModel

<body>

    <main id="main">

        <!-- ======= About Section ======= -->
        <section id="about" class="about">
            <section id="book-a-table" class="book-a-table">
                <div class="row">

                    <!-- ======= Inicio Informativo Div ======= -->
                    <div style="margin-top:10px;" class="col-12 col-md-2 order-2 order-lg-1" data-aos="fade-up">
                        <br>
                        <br>
                        <br>
                        <br>
                        <br>
                        <br>
                        <!-- ======= Inicio Publicidad Div ======= -->
                        <div class="section-title">
                            <h2>Publicidad</h2>
                        </div>

                        <div class="owl-carousel events-carousel" data-aos="fade-up" data-aos-delay="100">
                            <!--Se genera en base a la lista completa de publicidad registradas una serie de div que permitan ver todas las imagenes-->
                            @if (ViewBag.ListaPublicidad != null)
                            {
                                @foreach (PublicidadModel temp in ViewBag.ListaPublicidad)
                                {
                                    <div class="row event-item">
                                        <div class="col-lg-10">
                                            <a href="@temp.TC_LinkPublicidad" target="_blank">
                                                <img src="@temp.TC_URL_IMG" class="img-fluid" alt="">
                                            </a>
                                        </div>
                                    </div>
                                }
                            }
                        </div>
                        <br>
                        <!-- ======= Inicio Oferta Div ======= -->
                        <div class="section-title">
                            <h2>Ofertas</h2>
                        </div>

                        <div class="owl-carousel events-carousel" data-aos="fade-up" data-aos-delay="100">
                            <!--Se genera en base a la lista completa de oferta registradas una serie de div que permitan ver todas las imagenes-->
                            @if (ViewBag.ListaOferta != null)
                            {
                                @foreach (OfertaModel temp in ViewBag.ListaOferta)
                                {
                                    <div class="row event-item">
                                        <div class="col-lg-10">
                                            <img src="@temp.TC_URL_IMG" class="img-fluid" alt="">
                                        </div>
                                    </div>
                                }
                            }
                        </div>
                    </div>



                    <div class="container col-12 col-md-10 order-1 order-lg-2" data-aos="fade-up" style="margin-top: 150px">
                        <div class="tab-content">
                            <div class="form-row">
                                @if (@Model != null)
                                {

                                    <div class="col-lg-5 pt-4 pt-lg-0 order-1 order-lg-1 content  php-email-form">
                                        <div class="section-title">
                                            @*<h2>Reservation</h2>*@
                                            <p>Reservación en Línea</p>
                                        </div>
                                         <form class="" asp-controller="Reservacion" asp-action="RealizarReservacion" method="POST">


                                             <div class="form-row">

                                                 <div class="col-lg-4 col-md-6 form-group">
                                                     <input return type="text" class="form-control" onkeyup="buscarDatos()" maxlength="9" onkeypress="return (event.charCode >= 48 && event.charCode <= 57)" name="TC_Cedula" id="TC_Cedula" placeholder="Cédula" required>
                                                     <div class="validate"></div>
                                                 </div>

                                                 <div class="col-lg-4 col-md-6 form-group">
                                                     <input type="text" class="form-control" name="TC_Nombre" id="TC_Nombre" placeholder="Nombre" required>
                                                     <div class="validate"></div>
                                                 </div>
                                                 <div class="col-lg-4 col-md-6 form-group">
                                                     <input type="text" class="form-control" name="TC_Apellidos" id="TC_Apellidos" placeholder="Apellidos" required>
                                                     <div class="validate"></div>
                                                 </div>

                                                 <div class="col-lg-4 col-md-6 form-group">
                                                     <input type="email" class="form-control" name="TC_Email" id="TC_Email" placeholder="Email" required>
                                                     <div class="validate"></div>
                                                 </div>
                                                 <div class="col-lg-4 col-md-6 form-group">
                                                     <input type="text" class="form-control" name="TC_Telefono" id="TC_Telefono" placeholder="Telefono" required>
                                                     <div class="validate"></div>
                                                 </div>
                                                 <div class="col-lg-4 col-md-6 form-group">
                                                     <input type="text" class="form-control" name="TC_IdsHabitaciones" id="TC_IdsHabitaciones" placeholder="ids" hidden value="@Model.TC_IdsHabitaciones" required>
                                                 </div>

                                                 <div class="col-lg-4 col-md-6 form-group">
                                                     <input type="hidden" class="form-control" name="TC_FechaInicio" id="TC_FechaInicio" placeholder="ids"  value="@Model.TC_FechaInicio" required>
                                                 </div>

                                                 <div class="col-lg-4 col-md-6 form-group">
                                                     <input type="hidden" class="form-control" name="TC_FechaFin" id="TC_FechaFin" placeholder="ids"  value="@Model.TC_FechaFin" required>
                                                 </div>

                                             </div>

                                            <div class="section-title">
                                                <p>Datos de la Tarjeta</p>
                                            </div>

                                            <div class="col-lg-5 pt-4 pt-lg-0 order-1 order-lg-1 content">
                                                <div class="form-group">
                                                    <input type="text" class="form-control" name="TC_Tarjeta" id="TC_Tarjeta" placeholder="#Tarjeta" data-rule="minlen:4" data-msg="Please enter at least 4 chars" required>
                                                    <div class="validate"></div>
                                                </div>

                                            </div>

                                            <br>
                                            <div class="text form-row">

                                                <div class="col-lg-4 pt-4 pt-lg-0 order-1 order-lg-1 content">
                                                    <button type="button" onclick="cargarBuscarDisponibilidadView()"> Cancelar</button>
                                                </div>

                                                <div class="col-lg-3 pt-4 pt-lg-0 order-1 order-lg-1 content">
                                                    <button  type="submit">Aceptar</button>
                                                </div>

                                            </div>

                                        </form>


                                    </div>
                                    <div class="col-lg-1 order-2  order-lg-2">
                                    </div>


                                    <div class="col-lg-6 text-center order-3 order-lg-3">

                                        <div class="row">
                                            <div>
                                                @if (@Model.TemporadaActual != null)
                                                {

                                                    float tarifaFinal = @Model.TC_Tarifa;
                                                    if (@Model.TemporadaActual.TC_PorcentajeTemporada != null)
                                                    {

                                                        float aplicarTemporada = @Model.TC_Tarifa / 100;
                                                        float descuento = aplicarTemporada * Int32.Parse(@Model.TemporadaActual.TC_PorcentajeTemporada);
                                                        tarifaFinal = @Model.TC_Tarifa - descuento;
                                                    }
                                                    else
                                                    {
                                                        tarifaFinal = @Model.TC_Tarifa;
                                                    }


                                                    if (Model.TC_PorcentajeOferta != "0")
                                                    {
                                                        float aplicarOferta = tarifaFinal / 100;
                                                        float descuento = aplicarOferta * Int32.Parse(Model.TC_PorcentajeOferta);
                                                        tarifaFinal = tarifaFinal - descuento;
                                                    }


                                                    <h3 class="font-italic" style="text-align: justify;"> Precio base : @Model.TC_Tarifa</h3>

                                                    if (@Model.TemporadaActual.TC_PorcentajeTemporada != null || Model.TC_PorcentajeOferta == "0")
                                                    {
                                                        <h3 class="font-italic" style="text-align: justify;"> Precio con rebaja : @tarifaFinal</h3>
                                                    }


                                                    <h3 class="font-italic" style="text-align: justify;"> Habitacion de tipo @Model.TC_TipoHabitacion </h3>

                                                }
                                                <br>

                                                <img src="@Model.TC_URL_IMG" width="400" height="300">
                                            </div>

                                        </div>
                                    </div>

                                }
                                else
                                {


                                }
                            </div>
                        </div>

                    </div>

                    <!-- ======= Inicio Relleno Div ======= -->
                    <!-- ======= Fin Relleno Div ======= -->
                </div>
            </section>
        </section>



        <div id="preloader"></div>
        <a href="#" class="back-to-top"><i class="bx bx-up-arrow-alt"></i></a>

        <!-- Vendor JS Files -->
        <script src="~/Bootstrap/assets/vendor/jquery/jquery.min.js"></script>
        <script src="~/Bootstrap/assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
        <script src="~/Bootstrap/assets/vendor/jquery.easing/jquery.easing.min.js"></script>
        <script src="~/Bootstrap/assets/vendor/php-email-form/validate.js"></script>
        <script src="~/Bootstrap/assets/vendor/owl.carousel/owl.carousel.min.js"></script>
        <script src="~/Bootstrap/assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
        <script src="~/Bootstrap/assets/vendor/venobox/venobox.min.js"></script>
        <script src="~/Bootstrap/assets/vendor/aos/aos.js"></script>

        <!-- Template Main JS File -->
        <script src="~/Bootstrap/assets/js/main.js"></script>

    </main>
</body>


